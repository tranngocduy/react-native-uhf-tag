{"version":3,"names":["_reactNative","require","LINKING_ERROR","Platform","select","ios","default","UhfTagModule","NativeModules","UhfTag","Proxy","get","Error","eventEmitter","NativeEventEmitter","Events","exports","BLE_DEVICE_FOUND","RFID_TAG_READ","CONNECTION_STATUS","scanBLE","stopScanBLE","connectDevice","address","connectAddress","disconnect","getConnectionStatus","isConnected","startScan","startScanRFID","startScanWithTag","rfidTag","startScanRFIDWithTag","stopScan","stopScanRFID","clearTags","clearData","setPower","power","getPower","addBLEDeviceListener","listener","addListener","addRfidTagListener","addConnectionStatusListener","removeAllListeners","_default"],"sources":["index.tsx"],"sourcesContent":["import { NativeModules, NativeEventEmitter, Platform } from 'react-native';\nimport type { EmitterSubscription } from 'react-native';\n\nconst LINKING_ERROR =\n  `The package 'react-native-uhf-tag' doesn't seem to be linked. Make sure: \\n\\n` +\n  Platform.select({ ios: \"- You have run 'pod install'\\n\", default: '' }) +\n  '- You rebuilt the app after installing the package\\n' +\n  '- You are not using Expo Go\\n';\n\n// Use NativeModules directly\nconst UhfTagModule = NativeModules.UhfTag\n  ? NativeModules.UhfTag\n  : new Proxy(\n      {},\n      {\n        get() {\n          throw new Error(LINKING_ERROR);\n        },\n      }\n    );\n\n// Event emitter for native events\nconst eventEmitter = new NativeEventEmitter(NativeModules.UhfTag);\n\n// ==================== Types ====================\n\nexport interface BluetoothDevice {\n  name: string;\n  address: string;\n  rssi: string;\n}\n\nexport interface RfidTag {\n  epc: string;\n  rssi: string;\n  timestamp: number;\n}\n\nexport interface ConnectionStatus {\n  status: 'connected' | 'connecting' | 'disconnected' | 'error';\n  deviceName?: string;\n  deviceAddress?: string;\n  message?: string;\n}\n\nexport type BLEDeviceListener = (device: BluetoothDevice) => void;\nexport type RfidTagListener = (tag: RfidTag) => void;\nexport type ConnectionStatusListener = (status: ConnectionStatus) => void;\n\n// ==================== Event Names ====================\n\nexport const Events = {\n  BLE_DEVICE_FOUND: 'onBLEDeviceFound',\n  RFID_TAG_READ: 'onRfidTagRead',\n  CONNECTION_STATUS: 'onConnectionStatusChanged',\n} as const;\n\n// ==================== Bluetooth Operations ====================\n\n/**\n * Start scanning for nearby Bluetooth devices\n * Listen to Events.BLE_DEVICE_FOUND to get discovered devices\n */\nexport function scanBLE(): void {\n  UhfTagModule.scanBLE();\n}\n\n/**\n * Stop scanning for Bluetooth devices\n */\nexport function stopScanBLE(): void {\n  UhfTagModule.stopScanBLE();\n}\n\n/**\n * Connect to a Bluetooth device by its address\n * @param address - The Bluetooth device MAC address\n * @returns Promise resolving to connected device info\n */\nexport function connectDevice(address: string): Promise<string> {\n  return UhfTagModule.connectAddress(address);\n}\n\n/**\n * Disconnect from the currently connected device\n */\nexport function disconnect(): void {\n  UhfTagModule.disconnect();\n}\n\n/**\n * Get current connection status\n * @returns Promise with connection status string\n */\nexport function getConnectionStatus(): Promise<string> {\n  return UhfTagModule.getConnectionStatus();\n}\n\n/**\n * Check if device is currently connected\n * @returns Promise with boolean connection state\n */\nexport function isConnected(): Promise<boolean> {\n  return UhfTagModule.isConnected();\n}\n\n// ==================== RFID Operations ====================\n\n/**\n * Start scanning for RFID tags\n * Listen to Events.RFID_TAG_READ to receive tag data\n */\nexport function startScan(): void {\n  UhfTagModule.startScanRFID();\n}\n\n/**\n * Start scanning for a specific RFID tag\n * Only tags matching the provided EPC will trigger events\n * @param rfidTag - The EPC tag to search for\n */\nexport function startScanWithTag(rfidTag: string): void {\n  UhfTagModule.startScanRFIDWithTag(rfidTag);\n}\n\n/**\n * Stop RFID tag scanning\n */\nexport function stopScan(): void {\n  UhfTagModule.stopScanRFID();\n}\n\n/**\n * Clear all stored tag data\n * @returns Promise resolving to true if successful\n */\nexport function clearTags(): Promise<boolean> {\n  return UhfTagModule.clearData();\n}\n\n// ==================== Power Management ====================\n\n/**\n * Set the RFID reader power level\n * @param power - Power level (typically 5-30)\n * @returns Promise resolving to true if successful\n */\nexport function setPower(power: number): Promise<boolean> {\n  return UhfTagModule.setPower(power);\n}\n\n/**\n * Get the current RFID reader power level\n * @returns Promise with current power level\n */\nexport function getPower(): Promise<number> {\n  return UhfTagModule.getPower();\n}\n\n// ==================== Event Listeners ====================\n\n/**\n * Add listener for BLE device discovery\n * @param listener - Callback function receiving discovered devices\n * @returns Subscription object for cleanup\n */\nexport function addBLEDeviceListener(\n  listener: BLEDeviceListener\n): EmitterSubscription {\n  return eventEmitter.addListener(Events.BLE_DEVICE_FOUND, listener);\n}\n\n/**\n * Add listener for RFID tag reads\n * @param listener - Callback function receiving tag data\n * @returns Subscription object for cleanup\n */\nexport function addRfidTagListener(\n  listener: RfidTagListener\n): EmitterSubscription {\n  return eventEmitter.addListener(Events.RFID_TAG_READ, listener);\n}\n\n/**\n * Add listener for connection status changes\n * @param listener - Callback function receiving status updates\n * @returns Subscription object for cleanup\n */\nexport function addConnectionStatusListener(\n  listener: ConnectionStatusListener\n): EmitterSubscription {\n  return eventEmitter.addListener(Events.CONNECTION_STATUS, listener);\n}\n\n/**\n * Remove all event listeners\n */\nexport function removeAllListeners(): void {\n  eventEmitter.removeAllListeners(Events.BLE_DEVICE_FOUND);\n  eventEmitter.removeAllListeners(Events.RFID_TAG_READ);\n  eventEmitter.removeAllListeners(Events.CONNECTION_STATUS);\n}\n\n// ==================== Default Export ====================\n\nexport default {\n  // Bluetooth\n  scanBLE,\n  stopScanBLE,\n  connectDevice,\n  disconnect,\n  getConnectionStatus,\n  isConnected,\n  \n  // RFID\n  startScan,\n  startScanWithTag,\n  stopScan,\n  clearTags,\n  \n  // Power\n  setPower,\n  getPower,\n  \n  // Events\n  addBLEDeviceListener,\n  addRfidTagListener,\n  addConnectionStatusListener,\n  removeAllListeners,\n  Events,\n};\n\n"],"mappings":"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","ignoreList":[]}